<!DOCTYPE html>
<html lang="">
<head>
  <title>CSR Form</title>
</head>
<body>
  <h1>Generate a Certificate Signing Request (CSR)</h1>
  <form id="my-form">
    <label for="name">Name:</label>
    <input type="text" id="name" name="name"><br>
    <label for="email">Email:</label>
    <input type="email" id="email" name="email"><br>
    <label for="country">Country:</label>
    <input type="text" id="country" name="country"><br>
    <label for="state">State/Province:</label>
    <input type="text" id="state" name="state"><br>
    <label for="city">City:</label>
    <input type="text" id="city" name="city"><br>
    <label for="org">Organization:</label>
    <input type="text" id="org" name="org"><br>
    <label for="unit">Organizational Unit:</label>
    <input type="text" id="unit" name="unit"><br>
    <label for="cn">Common Name (e.g. example.com):</label>
    <input type="text" id="cn" name="cn"><br>
    <input type="submit" value="Generate CSR">
  </form>

  <script>
    // Handle form submission
    function handleSubmit(event) {
      event.preventDefault();
      const formData = {
        name: document.getElementById("name").value,
        email: document.getElementById("email").value,
        country: document.getElementById("country").value,
        state: document.getElementById("state").value,
        city: document.getElementById("city").value,
        org: document.getElementById("org").value,
        unit: document.getElementById("unit").value,
        cn: document.getElementById("cn").value,
      };
      
      // send the form data to the server using fetch
      fetch('http://127.0.0.1:5000/static/createCSR.sh', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json;charset=UTF-8'
        },
        body: JSON.stringify(formData)
      })
      .then(response => response.text())
      .then(data => {
        console.log(data);
      })
      .catch(error => {
        console.error(error);
      });
    }

    // Add submit event listener to the form
    const form = document.getElementById("my-form");
    form.addEventListener("submit", handleSubmit);
  </script>
</body>
</html>
