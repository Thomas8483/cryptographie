1) ACR
Création de la clé de l'ACR :
openssl ecparam -genkey -name prime256v1 -out ACR/root_ca.key

Création du CRT de l'ACR :
openssl req -new -x509 -key ACR/root_ca.key -out ACR/root_ca.crt -days 3650


2)
Création de la clé de l'ACI :
openssl ecparam -genkey -name prime256v1 -out ACI/intermediate_ca.key

Création du CSR de l'ACI :
openssl req -new -key ACI/intermediate_ca.key -out ACI/intermediate_ca.csr

Création du CRT de l'ACI :
openssl x509 -req -in ACI/intermediate_ca.csr -CA ACR/root_ca.crt -CAkey ACR/root_ca.key -CAcreateserial -out ACI/intermediate_ca.crt -days 730 -extfile ACI/intermediate_ca.cnf -extensions v3_intermediate_ca

Conversion du CRT en PFX :
openssl pkcs12 -export -inkey ACI/intermediate_ca.key -in ACI/intermediate_ca.crt -name test13 -out test13@mailfence.com.pfx

Affichage de certificat :
openssl x509 -in test13@mailfence.com.crt -text -noout

Affichage des droits de certificat :
openssl x509 -noout -purpose -in ACI/intermediate_ca.crt

Révoquation de certificat ?:
openssl ca -keyfile ACI/intermediate_ca.key -cert ACI/intermediate_ca.crt -revoke certs/test13@mailfence.com.crt -crl_reason test

OCSP:
openssl ecparam -genkey -name prime256v1 -out OCSP/ocsp.key
openssl req -new -key OCSP/ocsp.key -out OCSP/ocsp.csr
openssl x509 -req -in OCSP/ocsp.csr -CA ACI/intermediate_ca.crt -CAkey ACI/intermediate_ca.key -CAcreateserial -out OCSP/ocsp.crt -days 730

Chaîne de certificats :
cat ACR/root_ca.crt ACI/intermediate_ca.crt OCSP/ocsp.crt > chain.crt

openssl ocsp -port 8888 -index OCSP/index.txt -rsigner OCSP/ocsp.crt -rkey OCSP/ocsp.key -CA ACI/intermediate_ca.crt -ndays 365

openssl ocsp -issuer chain.crt -cert certs/test13@mailfence.com.crt -text -url http://localhost:8888